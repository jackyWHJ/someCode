define(["jquery","commonUtils"],function(e,n){var a={init:function(){n.addBack(),a.render()},deanTemplate:function(n){var a="";return e.map(n,function(e){a+="<li data-itemId="+e.itemId+'><img src="'+e.icon+'"><div class="il-info"><h4 class="il-name gray-big">'+e.name+'</h4><div class="il-member"><span class="il-member-price text-overflow gray-big">臭美会员价：<span class="pink">￥'+e.price+'</span></span> </div><div class="il-old"><span class="il-old-price gray">原价：<span>￥'+e.priceOri+'</span></span></div><div class="right-icon"></div></div></li>'}),a},render:function(){n.request({url:apiConfig.newApi+"semipermanent/items.html",successCallback:function(i){var r="",s="";if(i.response.popArtificer.length&&(r=a.deanTemplate(i.response.popArtificer)),i.response.artificer.length&&(s=a.deanTemplate(i.response.artificer)),i.response.banner)if(1==i.response.banner.eventType)e(".semipermanent-banner").css("background-image","url("+i.response.banner.img+")").append("<a href='"+i.response.banner.url+"'></a>");else if(0==i.response.banner.eventType)e(".semipermanent-banner").css("background-image","url("+i.response.banner.img+")");else if(2==i.response.banner.eventType){var t=e.parseJSON(i.response.banner.url);switch(t.type){case"FFA":url="../fashion/listItem.html?itemId="+t.itemId;break;case"SPM":url="../makeup/listItem.html?itemId="+t.itemId;break;case"salon":url="../salon/salonIndex.html?salonId="+t.itemId;break;case"artificers":url="expert.html";break;default:n.showTip("事件类型有错！")}e(".semipermanent-banner").css("background-image","url("+i.response.banner.img+")").append("<a href='"+i.response.banner.url+"'></a>")}e(".star-dean ul").html(r),e(".dean ul").html(s),a.event(),n.addMenu(),setTimeout(function(){e("#content").show()},300)}})},event:function(){e(".project li").on("click",function(){window.location="listItem.html?itemId="+e(this).attr("data-itemId")})}};return{init:a.init}});