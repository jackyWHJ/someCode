function submit(t){var e=$("#num"),d=e.val();commonUtils.isPhone(d)?$.ajax({url:apiConfig.userApi,method:"POST",data:{code:JSON.stringify({to:"valiInviteCode",type:"Activity",body:{mobilephone:d}})},beforeSend:function(){if(0==$("#loadingDiv").length){var t='<div id="loadingDiv"><div><img src="../../../css/images/ajaxloader.gif"><p>努力加载中...</p></div></div>';$(t).appendTo($("body"))}$("#loadingDiv").show()},success:function(t){if($("#loadingDiv").fadeOut(),t=$.parseJSON(t),1!=t.result){var d='<div class="row"><span class="column small-6">手机号码：</span><span class="column small-6"> '+e.val()+'</span></div><div class="row" style="margin-top: 20%;"><span class="column small-12" style="text-align: center;">无结果</span></div>';$(".content").html(d)}else{var i=t.data.main,o="1"==i.receivedPrize?!0:!1;if(2==i.register){var d='<p style="font-size:13px">当前用户 '+i.mobilephone+" 查询无结果</p>";$(".content").html(d)}else if(1==i.register){var d="<table><tbody><tr><td>手机号码</td><td>"+i.mobilephone+"</td></tr><tr><td>账号注册时间</td><td>"+i.addTime+"</td></tr><tr><td>商家邀请码</td><td>"+i.recommendSalon+"</td></tr><tr><td>活动邀请码</td><td>"+i.recommendActivity+"</td></tr><tr><td>集团邀请码</td><td>"+i.companyInfo+"</td></tr><tr><td>首单支付时间</td><td>"+i.firstTime+"</td></tr><tr><td>首单消费时间</td><td>"+i.useTime+"</td></tr><tr><td>首单退款时间</td><td>"+i.refundTime+"</td></tr><tr><td>首单应付金额</td><td>"+i.priceall+"</td></tr><tr><td>代金券面额</td><td>"+i.voucherMoney+"</td></tr><tr><td>支付方式</td><td>"+i.payType+"</td></tr><tr><td>首单实付金额</td><td>"+i.actuallyPay+"</td></tr><tr><td>首单购买店铺</td><td>"+i.salonName+"</td></tr><tr><td>首单购买项目</td><td>"+i.itemName+'</td></tr><tr><td colspan="2"><div class="radio"><span class=""><span class="'+(o?"fui-check check":"fui-check ")+'"></span></span><span class="">是否已经领过奖品（勾选后无法取消）</span></span></div></div></td></tr></tbody></table>';$(".content").html(d),$(".fui-check").hasClass("check")||$(".radio").off().on("click",function(t){commonUtils.confirm("确定已经领取奖品",{},function(t){t&&$.ajax({url:apiConfig.userApi,method:"POST",data:{code:JSON.stringify({to:"receivePrize",type:"Activity",body:{mobilephone:i.mobilephone,recommendCode:i.recommendCode}})},beforeSend:function(){if(0==$("#loadingDiv").length){var t='<div id="loadingDiv"><div><img src="../../../css/images/ajaxloader.gif"><p>努力加载中...</p></div></div>';$(t).appendTo($("body"))}$("#loadingDiv").show()},success:function(t){t=$.parseJSON(t),$("#loadingDiv").fadeOut("fast"),1==t.result?$(".radio").off().find(".fui-check").addClass("check"):commonUtils.alert("手机号码或激活码有误!")},error:function(t,e){$("#loadingDiv").hide();var d="数据请求失败，请稍后再试!";"parseerror"===e&&(d="响应数据格式异常!"),"timeout"===e&&(d="请求超时，请稍后再试!"),"offline"===e&&(d="网络异常，请稍后再试!"),commonUtils.alert(d)}})})})}}$(".normal-query").hide().addClass("result-query").removeClass("normal-query").show()},error:function(t,e){$("#loadingDiv").hide();var d="数据请求失败，请稍后再试!";"parseerror"===e&&(d="响应数据格式异常!"),"timeout"===e&&(d="请求超时，请稍后再试!"),"offline"===e&&(d="网络异常，请稍后再试!"),commonUtils.alert(d)}}):commonUtils.alert("手机号码格式不正确",{},function(){e.focus(),e.addClass("has-error"),$(".content").html("")})}$("#num").on("keyup",function(t){$(this).hasClass("has-error")&&$(this).removeClass("has-error")}),$(document).on("keyup",function(t){13===t.keyCode&&submit(t)}),$("#query").on("click",function(t){submit(t)});