$(function(){function n(){for(var n=navigator.userAgent,e=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),t=!0,i=0;i<e.length;i++)if(n.indexOf(e[i])>0){t=!1;break}return t}function e(){var n=window.innerWidth,e=window.innerHeight;n>e&&alert("当前处于横屏，为了更好的展示页面，请转为竖屏！")}function t(n){p=n.pageX,m=n.pageY}function i(n,e){if(0!=_){_>=v&&(_=v),e.preventDefault();var t=10,i=0;newx=n.pageX-p,newy=n.pageY-m,0==f&&(newy>t?0==h&&"false"!=$(".page").eq(_-1).attr("data-page-up")&&_>1&&(f=!0,i=_-1,setTimeout(function(){f=!1},700),_--,o(i,b,_,!0)):-t>newy&&0==w&&"false"!=$(".page").eq(_-1).attr("data-page-down")&&v>_&&(f=!0,i=_+1,setTimeout(function(){f=!1},700),_++,o(i,b,_,!0)),2==_?$("#arrow").hide():1==_&&$("#arrow").show())}}function a(){}function o(n,e,t){function i(n){var e=null;return"nextElementSibling"in n?e=n.nextElementSibling:(e=n.nextSibling.nodeType,3==e&&(e=n.nextSibling)),e}function a(n){var e=null;return"previousElementSibling"in n?e=n.previousElementSibling:(e=n.previousSibling.nodeType,3==e&&(e=n.previousSibling)),e}function o(){}var r=$(".page")[n-1],s=a(r),u=i(r);_=t,$(".page").removeClass("active"),$(s).css({"-webkit-transform":"translate3d(0,-100%,0)",transform:"translate3d(0,-100%,0)"}),$(r).css({"-webkit-transform":"translate3d(0,0%,0)",transform:"translate3d(0,0,0)"}),$(u).css({"-webkit-transform":"translate3d(0,100%,0)",transform:"translate3d(0,100%,0)"}),setTimeout(function(){$(r).addClass("active"),o(),"function"==typeof e&&e()},300)}n()&&(alert("请在手机端访问该页面"),$(document).hide());var r={versions:function(){{var n=navigator.userAgent;navigator.appVersion}return{trident:n.indexOf("Trident")>-1,presto:n.indexOf("Presto")>-1,webKit:n.indexOf("AppleWebKit")>-1,gecko:n.indexOf("Gecko")>-1&&-1==n.indexOf("KHTML"),mobile:!!n.match(/AppleWebKit.*Mobile.*/),ios:!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:n.indexOf("Android")>-1||n.indexOf("Linux")>-1,iPhone:n.indexOf("iPhone")>-1,iPhone6:$(window).width()>350,iPad:n.indexOf("iPad")>-1,webApp:-1==n.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};window.onorientationchange=e;var s=document.getElementById("board_audio");s.src=s.getAttribute("data-src"),$("#audio_btn").on("touchend",function(){s.paused?(s.play(),$("#rotateIcon").addClass("rotate"),$("#playYF").show()):(s.pause(),$("#rotateIcon").removeClass("rotate"),$("#playYF").hide())}),document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.invoke("getNetworkType",{},function(){s.play(),s.addEventListener("ended",function(){s.setAttribute("src",s.getAttribute("data-src")),s.play()},!1)})},!1);for(var u="../../../images/activity/findDifferent/",c=["loading20.png","loading48.png","loading82.png","loading100.png","1_fj.png","1_logo.png","1_neirong.png","2_neirong1.png","2_neirong2.png","2_zhaochabutton_normal.png","2_zhaochabutton_press.png","3_tup.png","3_wzi.png","4_tup.png","4_wzi.png","5_tup.png","5_wzi.png","6_tup.png","6_wzi.png","7_tup.png","7_wzi.png","8_bj_cao.png","8_guoguan_bj.png","8_guoguan_lqhb_button_normal.png","8_guoguan_lqhb_button_press.png","8_weiguoguan_bj.png","8_weiguoguan_zwyc_button_normal.png","8_weiguoguan_zwyc_button_press.png","9_hongbao_weidakai.png","9_hongbao_yidakai_10.png","9_hongbao_yidakai_30.png","9_hongbao_yidakai_100.png","10_neirong.png","11_neirong.png","12_neirong.png","13_neirong.png","14_bj.png","14_xiazaibutton_normal.png","14_xiazaibutton_press.png","15_dhyy_button_normal.png","15_dhyy_button_pressl.png","15_neirong.png","right.png","wrong.png"],d=0;d<c.length;d++)c[d]=u+c[d];var g=function(n,e){var t=new Image;t.onload=function(){e(n),t.onload=null},t.src=n},l=function(n,e){for(var t=n.length,i=0;n.length;)g(n.shift(),function(n){e(n,++i,t)})};l(c,function(n,e,t){var a=Math.floor(e/t*100);a>20&&50>a?$("#load").css("background-image","url(../../../images/activity/findDifferent/loading48.png)"):a>50&&100>a&&$("#load").css("background-image","url(../../../images/activity/findDifferent/loading82.png)"),100==a&&($("#load").css("background-image","url(../../../images/activity/findDifferent/loading100.png)"),setTimeout(function(){$("#load").remove(),$(".page, #audio_btn, #arrow").show(),$("body").bind("touchmove",function(n){n.preventDefault(),i(n.changedTouches[0],n)})},1e3))});var p,m,f=($.ajax({type:"post",url:"http://192.168.13.49/wechat/signature",data:{url:window.location.href},success:function(n){if(1==n.result){{var e=n.data.appId,t=n.data.nonceStr,i=n.data.timestamp,a=(n.data.url,n.data.signature);n.data.rawString}wx.config({debug:!1,corpid:e,timestamp:i,nonceStr:t,signature:a,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),wx.ready(function(){var n=window.location.host+"/choumeiApp/images/activity/findDifferent/share.png";wx.onMenuShareTimeline({title:document.title,link:window.location.href,imgUrl:n,success:function(){alert("分享到朋友圈啦")},cancel:function(){}}),wx.onMenuShareAppMessage({title:document.title,desc:"",link:window.location.href,imgUrl:n,type:"",dataUrl:"",success:function(){alert("分享给朋友啦")},cancel:function(){}}),wx.onMenuShareQQ({title:document.title,desc:"",link:window.location.href,imgUrl:n,success:function(){alert("分享到QQ啦")},cancel:function(){}}),wx.onMenuShareWeibo({title:document.title,desc:"",link:window.location.href,imgUrl:n,success:function(){alert("分享到腾讯微博啦")},cancel:function(){}})}),wx.error(function(){})}},error:function(){}}),!1),h=!1,w=!1,v=$(".page").length,_=1,b=function(){};$("body").bind("touchstart",function(n){"A"!==n.target.tagName.toUpperCase()&&n.preventDefault(),n=n.changedTouches[0],t(n)}),$("body").bind("touchend",function(n){"A"!==n.target.tagName.toUpperCase()&&n.preventDefault(),a(n.changedTouches[0])});var y={};y.dom={cover:$(".cover"),stage:$(".game"),frame:$(".frame"),result:$(".game-result"),corrResult:$(".cresults"),errResult:$(".eresults"),start:$("#start"),tip:$("#tip"),time:$("#time"),wrong:$(".wrong"),countDown:$(".num-zoom-in")},y.taskNumber=2,y.currentLever=1,y.allLever=y.dom.frame.length,y.currentRightNum=0,y.rightNum=0,y.time=2e4,y.maxTime=2e4,y.ended=!1,y.share=null,y.intervel=null,y.countDownNum=3,y.initCount=function(){++y.currentLever,y.currentRightNum=0,y.time=2e4,parseInt(y.currentLever)>parseInt(y.allLever)?(clearInterval(y.intervel),y.end()):y.dom.frame.hide().eq(y.currentLever-1).show()},y.update=function(){y.currentRightNum<y.taskNumber-1?++y.currentRightNum:y.initCount(),++y.rightNum,parseInt(y.currentLever)>parseInt(y.allLever)&&(y.ended=!0,y.end())},y.countDownCompute=function(n){20>=n&&n>=1&&(y.dom.countDown.css("top","40%").find("span").removeClass("animated zoomIn"),setTimeout(function(){y.dom.countDown.find("span").addClass("animated zoomIn").text(n)},1e3/60))},y.countDown=function(){function n(){y.ended&&clearInterval(y.intervel),parseInt(y.currentLever)>parseInt(y.allLever)&&(clearInterval(y.intervel),y.end()),y.time<=0?(y.initCount(),y.dom.countDown.css("top","300%").removeClass("animated zoomIn").find("span").text("")):(y.countDownCompute(y.time/1e3),y.time-=1e3)}y.intervel=setInterval(n,1e3)},y.start=function(){y.countDown()},y.end=function(){o(4,function(){},4);var n=parseInt(10*y.rightNum);60>n?(y.dom.errResult.show(),y.dom.corrResult.hide(),y.dom.errResult.find(".e-num").text(y.rightNum),y.dom.errResult.find(".e-score").text(n)):n>=60&&100>=n&&(y.dom.errResult.hide(),y.dom.corrResult.show(),y.dom.corrResult.find(".right-num").text(y.rightNum),y.dom.corrResult.find(".right-score").text(n))},y.restart=function(){y.taskNumber=2,y.currentLever=1,y.allLever=y.dom.frame.length,y.currentRightNum=0,y.rightNum=0,y.time=2e4,y.maxTime=2e4,y.ended=!1,y.share=null,y.intervel=null,y.dom.frame.hide().eq(0).show(),y.init(),$(".right").removeClass("show clicked")},y.init=function(){y.start(),y.dom.frame.find(".pic").off().bind("touchend",function(n){var e=$(n.target),t=$(this);if(e.hasClass("right"))if(e.hasClass("clicked"));else{var i=e.attr("class").split(" ");t.find("."+i[1]).addClass("show clicked"),setTimeout(function(){y.update()},400)}else{var a,o=n.changedTouches[0].pageX-30;r.versions.iPhone6?(o=n.changedTouches[0].pageX-30,a=n.changedTouches[0].pageY-50):a=n.changedTouches[0].pageY-25,y.dom.wrong.css({left:o,top:a}).addClass("show"),setTimeout(function(){y.dom.wrong.removeClass("show")},400)}})},$(".change_icon").bind("touchstart",function(){var n=$(this).find("img").eq(0);n.css("display","none").next().css("display","block")}),$(".change_icon").bind("touchend",function(){var n=$(this).find("img").eq(0);if("true"==$(this).attr("data-normal-press")&&n.css("display","block").next().css("display","none"),parseInt(n.closest("#nine").attr("data-num"))<2?1==n.closest("#nine").length&&n.closest("#nine").attr("data-num",parseInt(n.closest("#nine").attr("data-num"))+1):f=!1,n.closest("#nine").attr("data-click")){var e=parseInt(n.closest("#nine").attr("data-click"));n.closest("#nine").attr("data-click",e+1),parseInt(n.closest("#nine").attr("data-click"))>=3&&$("#arrow").show()}});var x=new Hammer(document.getElementById("begin"));x.on("tap",function(){f=!0,o(3,function(){y.init()},3)}),$(".get-red-right").bind("touchstart",function(){$(this).addClass("get-red-right-hover")}),$(".get-red-right").bind("touchend",function(){$(this).removeClass("get-red-right-hover"),o(5,function(){},5)}),$(".get-red-error").bind("touchstart",function(){$(this).addClass("get-red-error-hover")}),$(".get-red-error").bind("touchend",function(){$(this).removeClass("get-red-error-hover"),o(3,function(){},3),y.restart()});var k=new Hammer(document.getElementById("arrow"));k.on("tap",function(){_<$(".page").length&&o(++_,function(){},_),2==_&&$("#arrow").hide()})});