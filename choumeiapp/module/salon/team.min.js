define(["jquery","commonUtils","jquery.lazyLoad"],function(s,a,t){var i={init:function(){a.addBack(),a.addMenu(),this.action.init()},data:{tag:{end:!1},addrLati:window.localStorage.getItem("addrLati")||geoLoc.addrLati,addrLong:window.localStorage.getItem("addrLong")||geoLoc.addrLong,load:function(s){var t={url:apiConfig.newApi+"stylist/list.html",data:{lati:i.data.addrLati,"long":i.data.addrLong,sort:1,salonId:a.getQueryString("salonId")},successCallback:function(t){if(0!=t.code)return void a.alert(t.message);var t=t.response;t&&0==t.length&&(i.data.tag.end=!0),s(t)}};a.request(t)}},view:{resetImg:function(){var a=279/328,t=.9*s("body").width()*.47;s("#imgHResetStyle").remove(),s("<style id='imgHResetStyle'> .sl-s-imgWrap{height:"+t*a+"px } </style>").appendTo(s("head"))},updateList:function(a){var t=[];s.each(a,function(s,a){t.push("<li stylistId="+a.stylistId+">"),t.push('<div class="sl-stylist"><div class="sl-s-imgWrap">'),t.push('<img class="sl-s-img lazy" src="../../images/default_img.png"  data-original ='+a.img+"></div>"),t.push('<div class="sl-s-info"><h1 class="sl-s-name text-overflow">'+a.name+"</h1>"),t.push('<div class="sl-s-subInfo"><span class="sl-s-rank">'+a.grade+"</span>"),t.push('<p class="sl-salonname text-overflow">'+a.salonname+"</p>"),t.push('<p class="sl-address"><i></i><span class="sla-name text-overflow">'+a.areaName+'</span><span class="sla-distance text-overflow">'+a.distance+"</span></p>"),t.push("</div></div></div></li>")}),s("#stylistList").append(t.join("")),s("img.lazy").removeClass("lazy").lazyload({effect:"fadeIn"})}},action:{init:function(){i.data.load(i.view.updateList),this.initList()},initList:function(){function a(){t.scrollTop()+i>=t.height()}var t=s(document),i=s(window).height();t.on("scroll",a),s("#stylistList").on("click","li",function(){location="stylist.html?stylistId="+s(this).attr("stylistId")})}}};return i});