define(["jquery","swiper","commonUtils","module/makeup/makeup.min"],function(t,i,e,n){var o={init:function(t){o.render(t)},swiper:function(){t("#swiper-list-introduction-container").height(t(window).height()-t(".header").height()-t(".list-item-introduction-title-wrap").height()-20);var e=new i(".swiper-list-introduction",{direction:"horizontal",onInit:function(){},onSlideChangeStart:function(i){t(".list-item-introduction-title-wrap .grid-block-item").removeClass("active"),0==i.activeIndex?t(".list-item-introduction-title-wrap .grid-block-item")[0].className="grid-block-item active":1==i.activeIndex?t(".list-item-introduction-title-wrap .grid-block-item")[1].className="grid-block-item active":2==i.activeIndex&&(t(".list-item-introduction-title-wrap .grid-block-item")[2].className="grid-block-item active")}});t(t(".list-item-introduction-title-wrap .grid-block-item").get(0)).on("click",function(){e.slideTo(0)}),t(t(".list-item-introduction-title-wrap .grid-block-item").get(1)).on("click",function(){e.slideTo(1)}),t(t(".list-item-introduction-title-wrap .grid-block-item").get(2)).on("click",function(){e.slideTo(2)})},template:function(i){t("#process").text(i.beautyProcedureName),document.title=i.name,t(".header .title").text(i.name);var e="";if(t.map(i.introductions,function(i){var o="";t.map(i.imgs,function(t){o+='<img src="'+t+'">'}),e+=o+'<h2 class="pink">'+i.title+'</h2><p class="gray">'+n.replaceToNewline(i.content)+"</p>"}),i.profile.length){var o='<table><tr><td colspan="2">产品档案</td></tr>';t.map(i.profile,function(t){o+="<tr><td>"+t[0]+"</td><td>"+n.replaceToNewline(t[1])+"</td></tr>"}),o+="</table>"}t(".one .product").append(e+o),n.makeUpCenter();var r="";t.map(i.bookingProcedure,function(i){var e="";t.map(i.imgs,function(t){e+='<img src="'+t+'">'}),r+=e+'<h2 class="pink">'+i.title+'</h2><div><p class="gray">'+n.replaceToNewline(i.content)+"</p></div>"}),t(".two").append('<div class="product">'+r+"</div>");var c="";t.map(i.beautyProcedure,function(i,e){var o="";t.map(i.imgs,function(t){o+='<img src="'+t+'">'}),c+="<li>"+o+"<span>"+(e+1)+"</span><h2>"+i.title+"</h2>"+n.replaceToNewline(i.content)+"</li>"}),t(".three ul").append(c),t("#phone-num").text(i.beautyPhoneFormat)},render:function(i){e.request({url:apiConfig.newApi+"beauty/item-info.html",data:{itemId:i},successCallback:function(i){i.response&&o.template(i.response),setTimeout(function(){o.swiper(),o.event()},500),n.appointment(),n.call(),n.title(),e.addMenu(),n.map(),n.share(i.response.share),setTimeout(function(){t("#content").show()},300)}})},event:function(){t("#toTop").on("click",function(){return t(".swiper-slide").animate({scrollTop:0},200,function(){t("#toTop").hide()}),!1}),t(".swiper-slide").scroll(function(i){var e=i.currentTarget.scrollTop;e>200?t("#toTop").show():t("#toTop").hide()})}};return{init:o.init}});