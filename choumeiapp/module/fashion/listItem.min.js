define(["jquery","commonUtils","swiper","module/fashion/fashion.min"],function(i,e,n,t){var o={init:function(i){e.addMenu(),o.render(i)},template:function(e){if(document.title=e.name,i(".header .title").text(e.name),i(".introduction h3 span").text(e.name),i(".head-people-liked .pink").text(e.bookingNum+"人"),i("#description").html(t.replaceToNewline(e.desc)),e.norms.length>0){var n="";i.map(e.norms,function(i){n+='<section class="grid-block slimming" data-normId="'+i.normId+'"><section class="grid-block-item"><img src="'+i.img+'"><span class="gray-big slimming-descrption">'+i.norm+'</span></section><section class="line"></section><section class="grid-block-item two"><div class="slimming-price-wrap"><div class="slimming-price"><span class="gray-big">臭美会员价：</span><span class="pink ">￥<i id="choumei-slimming-waist-price">'+i.price+'</i></span></div><div class="text-right"><span class="gray">原价：</span><span>￥<i id="slimming-waist-price">'+i.priceOri+"</i></span></div></div></section></section>"}),i("#norms").append(n),i(".price").hide()}else i("#choumei-price").text(e.price),i("#choumei-price-origin span").text(e.priceOri);i("#fashion-equipmentSlogan span").text(e.equipmentSlogan);try{i(".needle-shop").attr({"data-bannerId":e.banner.bannerId}),i(".needle-shop").append('<img src="'+e.equipmentCover+'">')}catch(s){}var c="";i.map(e.imgs,function(i){c+='<div class="swiper-slide" style="background-image:url('+i+')"></div>'}),i("#swiper-container .swiper-wrapper").append(c),setTimeout(function(){o.swiper()},400);var a="";i.map(e.notices,function(i){a+='<div class="grid-block-item"><div class="title">'+i.title+'：</div><div class="title-description">'+t.replaceToNewline(i.content)+"</div></div>"}),i(".appointment").append(a),i("#phone-num").text(e.beautyPhoneFormat),i("#choumei-call-price").text(e.bookingPrice)},swiper:function(){var e=new n(".swiper-list-head",{pagination:".swiper-pagination",onInit:function(){t.imgResize({imgdiv:i("#swiper-container"),imgwidth:i(window).width(),biliw:375,bilih:200})}});return e},render:function(n){e.request({url:apiConfig.newApi+"beauty/item-info.html",data:{itemId:n},successCallback:function(e){e.response&&o.template(e.response),o.event(),t.call(),t.title(),t.appointment(),t.map(),t.share(e.response.share),setTimeout(function(){i("#content").show()},300)}})},event:function(){i("#toTop").on("click",function(){return i("body,html").animate({scrollTop:0},200,function(){i("#toTop").hide()}),!1}),i(document).scroll(function(){i(window).scrollTop()>200?i("#toTop").show():i("#toTop").hide()}),i(".expert").on("click",function(){location="expert.html"}),i(".product-details").on("click",function(){location="../makeup/introduction.html?itemId="+e.getQueryString("itemId")}),i(".learn-makeup-center").on("click",function(){location="../makeup/mCenter.html"}),i(".equipment").on("click",function(){window.location="equipment.html?itemId="+e.getQueryString("itemId")})}};return{init:o.init}});