define(["jquery","commonUtils"],function(e,o){var r="",n=function(){o.addBack(),o.addMenu(),d(),f(),r=window.sessionStorage.getItem("keywords"),e("#back").on("click",function(e){window.location="salonList.html"})},t=function(){var o=localStorage.getItem("salonSearchKeywords");o&&JSON.parse(o)&&(e(".select-search-box ul").html(""),JSON.parse(o).forEach(function(o,r){e(".select-search-box ul").append("<li index="+r+"><div>"+o+"</div></li>")}),e(".select-search-box ul > li:first-child").css("background-color","#f2f2f2"),e(".select-search-box ul > li").on("click",c))},s=function(o){e("#keywordsClearBtn").show()},a=function(o){e("#keywordsInput").val(""),e(o.target).hide()},c=function(o){var r=e(o.currentTarget),n=r.children().text();e("#keywordsInput").val(n),e(".select-search-box ul > li").css("background-color",""),r.css("background-color","#f2f2f2"),l()},l=function(){var r=e("#keywordsInput").val(),r=r.replace(/\s+/g,"");""!=r?(window.sessionStorage.setItem("keywords",r),i(r),location.href="searchResult.html?keyword="+r):o.alert("请输入搜索条件！")},i=function(e){if(e){var o=localStorage.getItem("salonSearchKeywords");if(o){var r=JSON.parse(o),n=r.indexOf(e);n>=0&&r.splice(n,1);var t=r.unshift(e);t>5?(r.splice(5),localStorage.setItem("salonSearchKeywords",JSON.stringify(r))):localStorage.setItem("salonSearchKeywords",JSON.stringify(r))}else{var r=new Array(e);localStorage.setItem("salonSearchKeywords",JSON.stringify(r))}}},f=function(){e("#keywordsInput").on("focus",t),e("#keywordsInput").on("input",s),e("#keywordsClearBtn").on("click",a),e("#searchSalonBtn").on("click",l)},d=function(){e("#keywordsInput").off(),e("#keywordsClearBtn").off(),e("#searchSalonBtn").off(),e(".select-search-box ul > li").off()};return{init:n}});