define(["jquery","commonUtils","module/fashion/fashion.min"],function(e,n,i){var s={init:function(){s.render()},htmlTemplate:function(n){var s="";return e.map(n,function(e){s+='<li class="clearfix" data-itemId="'+e.itemId+'"><img src="'+e.icon+'"><div><h3 class="text-overflow">'+e.name+'</h3><span class="text-overflow">'+i.replaceToNewline(e.desc)+'</span><aside><span class="num">'+e.bookingNum+"</span>人已预约</aside></div></li>"}),s},render:function(){n.request({url:apiConfig.newApi+"fast-fasion/index.html",successCallback:function(a){if(a.response.items.length&&(e(".list ul").html(s.htmlTemplate(a.response.items)),s.event(),n.addMenu(),i.title()),a.response.banner){if(1==a.response.banner.eventType)e(".head-img").css("background-image","url("+a.response.banner.img+")").append("<a href='"+a.response.banner.url+"'></a>");else if(0==a.response.banner.eventType)e(".head-img").css("background-image","url("+a.response.banner.img+")");else if(2==a.response.banner.eventType){var t=e.parseJSON(a.response.banner.url);switch(t.type){case"FFA":url="../fashion/listItem.html?itemId="+t.itemId;break;case"SPM":url="../makeup/listItem.html?itemId="+t.itemId;break;case"salon":url="../salon/salonIndex.html?salonId="+t.itemId;break;case"artificers":url="../makeup/expert.html";break;default:n.showTip("事件类型有错！")}e(".head-img").css("background-image","url("+a.response.banner.img+")").append("<a href='"+a.response.banner.url+"'></a>")}i.imgResize({imgdiv:e(".head-img"),imgwidth:e(window).width(),biliw:375,bilih:200})}setTimeout(function(){e("#content").show()},300)}})},event:function(){e(".list li").on("click",function(){var n=e(this).attr("data-itemId");window.location="listItem.html?itemId="+n})}};return{init:s.init}});