define(["jquery","commonUtils"],function(t,n){var i=null,e=null,o=null,a=function(){i=n.getQueryString("beautySn"),l()},l=function(){n.request({data:{orderSn:i},url:apiConfig.newApi+"booking/ticket.html",successCallback:c})},c=function(i){console.dir(i),0!=i.code?n.alert(i.message):(i=i.response,i.bookingSn?(t("#itemName").text(i.bookingItemNames),t("#bookingSn").text(i.bookingSn),t("#bookingDate").text(i.bookingDate),t("#amount").text("￥"+i.payableAmount),e=i.beautyId,o=i.itemType,r(),i.inviteUrl&&t("#invitation").show().on("click",function(){location=i.inviteUrl}),sessionStorage.setItem("appoint-ticket",JSON.stringify(i))):(t("#itemName").text(i.bookingItemNames),t("#title").text("预约成功"),t("#viewTicket,#invitation,#delayTip,.appoint-row").toggle(),t("#refresh").show().on("click",function(){location.reload()})))},r=function(){t("#viewTicket").on("click",function(){location="appoint-detail.html"})};return{init:a}});