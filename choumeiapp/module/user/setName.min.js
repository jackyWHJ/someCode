define(["jquery","commonUtils"],function(n,a){var e={},i="",t=n("#nickNameInput"),c=n("#changeNameBtn"),o=n("#cleanBtn"),u=function(){e=a.checkLogin(),e&&(i=e.userId),a.addBack(),a.addMenu(),t.on("input",function(){nickName=t.val(),nickName.length>0&&(c.addClass("activate-status"),o.show())}),o.on("click",function(){t.val(""),o.hide()}),s()},s=function(){c.on("click",function(){var n=t.val(),e=a.strlen(n),n=n.replace(/\s+/g,"");if(e>20||1>e||""==n)return void a.alert("昵称长度不符合！");var c={to:"updateInfo",type:"User",body:{userId:i,nickname:n}};a.ajaxRequest({data:c,successCallback:function(n){n.result?window.history.go(-1):a.showTip(n.msg)},url:apiConfig.userApi})})};return{init:u}});